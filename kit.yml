---
name:    blacksmith
version: 0.7.1
author:  James Hunt <james@niftylogic.com>
docs:     https://github.com/cloudfoundry-community/blacksmith-boshrelease
code:     https://github.com/genesis-community/blacksmith-genesis-kit

description: Blacksmith

genesis_version_min: 2.6.0

certificates:
  base:
    tls:
      ca: {valid_for: 10y}
      director:
        valid_for: 1y
        names:
          - ${params.ip}
      blobstore:
        valid_for: 1y
        names:
          - ${params.ip}

    tls/nats:
      ca: {valid_for: 10y}
      server:
        valid_for: 1y
        names:
          - default.nats.bosh-internal
          - ${params.ip}
      director:
        valid_for: 1y
        names:
          - default.director.bosh-internal
      hm:
        valid_for: 1y
        names:
          - default.hm.bosh-internal

  broker-tls:
    broker:
      ca: {valid_for: 10y}
      server:
          valid_for: 1y
          names:
            - ${params.ip}


credentials:
  base:
    broker:             {password: random 64}

    db:                 {password: random 64}
    nats:               {password: random 64}
    blobstore/agent:    {password: random 64}
    blobstore/director: {password: random 64}

    users/admin:        {password: random 64}
    users/hm:           {password: random 64}
    users/blacksmith:   {password: random 64}

    registry:           {password: random 64}

provided:
  aws:
    aws:
      keys:
        secret_key:
          prompt:    AWS Secret Key
        access_key:
          sensitive: false
          prompt:    AWS Access Key

  azure:
    azure:
      keys:
        client_id:
          sensitive: false
          prompt:    Azure Client ID
        client_secret:
          prompt:    Azure Client Secret
        tenant_id:
          sensitive: false
          prompt:    Azure Tenant ID
        subscription_id:
          sensitive: false
          prompt:    Azure Resource Group to be used by BOSH to deploying VMs
    azure/ssh:
      keys:
        public:
          prompt:  Azure SSH Public Key

  google:
    google:
      keys:
        json_key:
          sensitive: false
          multiline: true
          prompt:    GCP credentials (generally supplied as a JSON block)

  openstack:
    openstack/creds:
      keys:
        username:
          sensitive: false
          prompt:    OpenStack username
        password:
          prompt:    OpenStack password
        domain:
          sensitive: false
          prompt:    OpenStack domain
        project:
          sensitive: false
          prompt:    OpenStack project

  vsphere:
    vsphere:
      keys:
        user:
          sensitive: false
          prompt:    Username for BOSH to authenticate with vCenter
        address:
          sensitive: false
          prompt:    IP address of VMWare vCenter Server Appliance
        password:
          prompt:    Password for vCenter user